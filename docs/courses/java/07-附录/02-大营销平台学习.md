---
title: 大营销平台学习
author: ray
date: 2025/02/23 11:29
categories:
  - 项目实战
tags:
  - Java
  - 营销平台
---
# 大营销平台学习

## 1.领域驱动设计项目

之前我有写过领域驱动的博客，可以先去了解一下。

### 如何在本项目中使用DDD

#### 分析需求

当我们拿到需求还是和之前的开发模式，要对需求进行一个分析，目前我们主线任务是抽奖，然后我们要如何去设计这个抽奖

1. 怎么抽奖？
2. 抽什么奖？

这是我能想到的设计需要考虑的问题，接下来我们小傅哥是如何设计的

![](https://raw.githubusercontent.com/rayliu445/blogImage/master/blogImage/%E5%A4%A7%E8%90%A5%E9%94%80%E6%8A%BD%E5%A5%96%E9%9C%80%E6%B1%82%E5%9B%BE20250406.png)

可以看到，我的思考对于业务触感还是比较迟钝

思考的完整性不同，导致整理出来的需求也就不同，下面是小傅哥的整理出来的需求

1. 整体概率相加，总和为1或者分值计算，概率范围千分位
2. 抽奖为免费抽奖次数 + 用户消耗个人积分抽奖
3. 抽奖活动可给用户分配可抽奖次数，通过点击签到发放
4. 活动延伸配置用户库存消耗管理，单独提供表配置各类库存 用户可用总库存、用户可用日库存
5. 部分抽奖规则，需要抽奖n次后解锁，才能有机会抽取
6. 抽奖完成增加（运气值/积分值/抽奖次数）记录，让用户获得奖品。
7. 奖品对接，自身的积分、内部系统的奖品
8. 随机积分，发给你积分。
9. 黑名单用户抽奖，则给予固定的奖品。

上面的大部分工作都是产品来做的，但是由于这个是学习项目，我也要充当产品的角色去思考。接下来就是梳理业务流程，产品会给我流程图(之前工作就有评审先行，或者PRD文档)，那我就要去思考流程图中的关键节点如何设计(这个没法一步到位，只能慢慢提升)，比如说需求中的第1点这个属于哪个领域，我觉得小傅哥的那个业务流程图太快出来了，所以导致我们不知道为什么就那样设计了

#### 领域建模

##### 1.用例图

用例图就是用户和系统交互的最简表示形式，还是以小傅哥的用例图为例

![](https://raw.githubusercontent.com/rayliu445/blogImage/master/blogImage/%E5%A4%A7%E8%90%A5%E9%94%80%E7%94%A8%E4%BE%8B%E5%9B%BE20250406.png)

上面用户和传统的电商项目一致，无非就是用户->运营，但是用户侧的交互要比运营侧的交互更加的多(这点和toG电商还是有不同的，因为中间有审核人员这么一项)

##### 2.事件风暴定义

这里要深入讲的话，太过于复杂我们只需要知道，是由领域事件来作为驱动

![](https://raw.githubusercontent.com/rayliu445/blogImage/master/blogImage/%E5%A4%A7%E8%90%A5%E9%94%80%E4%BA%8B%E4%BB%B6%E9%A3%8E%E6%9A%B420250406.png)

比较重要的两个就是**决策命令**和**领域事件**

重点来了，上面的意义图就是我们每次建模想要的最终结果。**一个用户，通过一个策略命令，使用领域对象，通过业务流程，完成2个领域事件，调用1次外部接口的过程**。

##### 3.领域事件的挖掘

这一步相当重要，因为我们要对照业务流程来发掘领域事件，宁可多也不要少，因为这关乎到我们业务流程实际上能不能走下去，当然，后面的再审核也必不可少如果你是owner的话，你要对这一步格外的关心，不然系统的稳健性就会很差。

![](https://raw.githubusercontent.com/rayliu445/blogImage/master/blogImage/%E5%A4%A7%E8%90%A5%E9%94%80%E9%A2%86%E5%9F%9F%E4%BA%8B%E4%BB%B6%E6%8C%96%E6%8E%9820250406.png)

关于上面的事件，我其实还有疑问的，业务流程图是在这个时候出来吗？还是说拿到产品prd文档之后就要梳理出业务流程图，我觉得拿到prd文档之后就画出业务流程图对我来说有点困难，也可能是我水平不行，小傅哥是需求出来就有业务流程图的，然后再进行领域事件的挖掘，我暂且以他的工作流程为准

![](https://raw.githubusercontent.com/rayliu445/blogImage/master/blogImage/%E5%A4%A7%E8%90%A5%E9%94%80%E4%B8%9A%E5%8A%A1%E6%B5%81%E7%A8%8B20250406.png)

可以看到上面的领域事件都是业务流程上的一些关键节点，例如，点击签到之后添加签到流水完成，抽奖动作之后抽奖单的创建和的用户账户额度扣减

##### 4.识别领域角色和对象

有了领域事件之后，如何将这些领域事件进行串联，其实通过**决策命令**进行串联。

![](https://raw.githubusercontent.com/rayliu445/blogImage/master/blogImage/%E5%A4%A7%E8%90%A5%E9%94%80%E4%B8%B2%E8%81%94%E9%A2%86%E5%9F%9F%E4%BA%8B%E4%BB%B620250407.png)

作为新手，我们需要按照事件风暴围绕领域事件去串联决策命令-业务流程-领域事件。我看小傅哥的实体对象都是在决策命令上，不知道为什么这么设计

##### 5.划分领域边界

###### 5.1 圈出领域

![](https://raw.githubusercontent.com/rayliu445/blogImage/master/blogImage/%E5%A4%A7%E8%90%A5%E9%94%80%E5%9C%88%E5%87%BA%E9%A2%86%E5%9F%9F20250407.png)

###### 5.2 领域边界

![](https://raw.githubusercontent.com/rayliu445/blogImage/master/blogImage/%E5%A4%A7%E8%90%A5%E9%94%80%E9%A2%86%E5%9F%9F%E8%BE%B9%E7%95%8C20250407.png)

现在我们再回过头来重新从用户角度将领域串起来(注意，是领域而不是领域事件)

##### 6.研发详细设计(重点)

###### 6.1 实体对象

![](https://raw.githubusercontent.com/rayliu445/blogImage/master/blogImage/%E5%A4%A7%E8%90%A5%E9%94%80%E5%AE%9E%E4%BD%93%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A120250407.png)

###### 6.2 流程设计

小傅哥在这里给了时序图，我们可以看到整个逻辑相对来说并没有那么复杂

![](https://raw.githubusercontent.com/rayliu445/blogImage/master/blogImage/%E5%A4%A7%E8%90%A5%E9%94%80%E6%97%B6%E5%BA%8F%E5%9B%BE%E8%AE%BE%E8%AE%A120250407.png)

## 2.抽奖策略领域

### 2.1抽奖概率装配

### 子规则领域
